asyncapi: '3.0.0'
info:
  title: Ollert API
  version: '1.0.0'
  description: >
    The Ollert API provides real-time communication for managing boards, columns, 
    and cards within a collaborative environment. A board represents a project 
    or workflow, containing columns that organize cards into categories or statuses. 
    Cards are individual tasks or activities that can be created, updated, or moved 
    across columns to reflect progress. Built on WebSockets, the API ensures instant 
    updates, enabling seamless collaboration and efficient task management for teams of any size.

servers:
  local:
    host: localhost:3000
    protocol: ws

channels:
  boardCommands:
    address: /boards/{boardId}/commands
    parameters:
      boardId:
        description: Id of the board.
        default: 6f0ca58d-95ac-4817-9e39-9258f5cc75bd
    messages:
      Commands:
        name: Commands
        title: Commands
        payload:
          $ref: '#/components/schemas/BoardCommand'
  boardEvents:
    address: /boards/{boardId}/events
    parameters:
      boardId:
        description: Id of the board.
        default: 6f0ca58d-95ac-4817-9e39-9258f5cc75bd
    messages:
      Commands:
        name: Events
        title: Evenets
        payload:
          $ref: '#/components/schemas/BoardEvent'
operations:
  addColumn:
    action: receive
    channel:
      $ref: '#/channels/boardCommands'
    reply:
      channel: 
        $ref: '#/channels/boardEvents' 

components:
  schemas:
    BoardCommandType:
      type: string
      description: Tipo
      enum: [AddColumn, CreateCard]
    BoardCommand:
      type: object
      additionalProperties: false
      required:
        - type
        - data
      properties:
        type:
          $ref: '#/components/schemas/BoardCommandType'
        data:
          type: object
          description: Contenido del mensaje.
          oneOf:
            - $ref: '#/components/schemas/AddColumn'
            - $ref: '#/components/schemas/CreateCard'
    BoardEventType:
      type: string
      description: Tipo
      enum: [ColumnAdded, CardCreated]
    BoardEvent:
      type: object
      additionalProperties: false
      required:
        - type
        - data
      properties:
        type:
          $ref: '#/components/schemas/BoardEventType'
        data:
          type: object
          description: Contenido del mensaje.
          oneOf:
            - $ref: '#/components/schemas/ColumnAdded'
            - $ref: '#/components/schemas/CardCreated'
    AddColumn:
      type: object
      additionalProperties: false
      required:
        - id
        - name
      properties:
        id:
          type: string
        name:
          type: string
    ColumnAdded:
      type: object
      additionalProperties: false
      required:
        - name
      properties:
        name:
          type: string
    CreateCard:
      type: object
      additionalProperties: false
      required:
        - name
      properties:
        name:
          type: string
    CardCreated:
      type: object
      additionalProperties: false
      required:
        - name
      properties:
        name:
          type: string
          

x-remoteServers: []
